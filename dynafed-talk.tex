\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{hyperref}
\usepackage{graphicx}
\title{Update on the Dynamic Federation}
\date[ISPN â€™80]{Technical Coordination Board}
\author[Euclid]{Frank Berghaus \href{mailto:berghaus@cern.ch}{\texttt{berghaus@cern.ch}}}

% --- Blocks ---
\setbeamertemplate{blocks}[default]

\usetheme{frank}

\begin{document}

\begin{frame}
\titlepage
\end{frame}


\begin{frame}
\frametitle{Review: What does DynaFed do?}
\begin{itemize}
\item Aggregates storage and metadata farms on-the-fly
\item Exposes standard protocols that support redirections and WAN data access
\item Creates (the illusion of) a unique namespace from a set of distinct storage or metadata endpoints
\item read and write support
\end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Dynafed Namespace}
  \begin{figure}
      \centering
      \includegraphics[width=\columnwidth]{dynafed-namespaces.png}
  \end{figure}
\end{frame}

\begin{frame}
  \frametitle{ATLAS Projects with DynaFed}
  \begin{itemize}
    \item At UVic: Rolf Seuster \& Marcus Ebert
    \item At CERN: Frank Berghaus
    \item At RAL: Alastair Dewhurst
    \item In Italy: Alessandro De Salvo
  \end{itemize}
  With lots of help from ADC and DDM!
\end{frame}

\begin{frame}
  \frametitle{Status of DynaFed at CERN}
  \begin{itemize}
    \item Setup:
    \begin{itemize}
      \item DynaFed running on CC7 on CERN OpenStack
      \item Linked to CephS3 at CERN
    \end{itemize}
		\item Authentication:
    \begin{itemize}
      \item Using X.509 with VOMS extensions
      \item Read/Write/List access for ATLAS, added delete access for DDM team
      \item Federation forwards signed URLs to authenticated users (signatures last 1h)
    \end{itemize}
		\item Panda Queue (CERN-EXTENSION\_MCORE) writing Job Output to federation
		\item Defined Storage Element in ATLAS DDM (Rucio) : CERN-EXTENSION\_SCRATCHDISK
  \end{itemize}

\end{frame}

\begin{frame}
  \frametitle{Challenges: Behaviour on Mkdir}
  \begin{block}{WebDAV RFC 8.7.2 PUT for Collections}
    When the PUT operation creates a new non-collection resource all ancestors MUST already exist. If all ancestors do not exist, the method MUST fail with a 409 (Conflict) status code. For example, if resource /a/b/c/d.html is to be created and /a/b/c/ does not exist, then the request must fail.
  \end{block}
  \begin{itemize}
    \item<1- > Default Rucio HTTP(S) behaviour: make all parent directory before putting file
    \item<2- > In object stores directories/collections do not exist
    \item<2- > Cannot implement sensible mkdir/mkcol in federation
  \end{itemize}
\end{frame}



\end{document}
